{"version":3,"sources":["webpack://project-structure/./src/components/sortable-table/index.js","webpack://project-structure/./src/components/double-slider/index.js","webpack://project-structure/./src/pages/products/list/headerConfig.js","webpack://project-structure/./src/pages/products/list/index.js","webpack://project-structure/./src/utils/fetch-json.js"],"names":["SortableTable","constructor","headersConfig","url","sorted","id","find","item","sortable","order","isSortLocally","step","start","end","range","rowTemplate","html","this","async","bottom","element","getBoundingClientRect","document","documentElement","clientHeight","loading","data","loadData","update","column","event","target","closest","dataset","querySelector","append","subElements","arrow","sortOnClient","sortOnServer","render","getTemplate","getTableHeader","getTableBody","getSubElements","querySelectorAll","reduce","acc","subElement","map","header","getHeaderRow","join","title","getHeaderSortingArrow","getTableRows","getTableRow","template","wrapper","createElement","innerHTML","firstElementChild","renderRows","initEventListeners","URL","process","searchParams","set","classList","add","fetchJson","toString","remove","sortedData","sortData","body","length","addRows","arr","sortType","direction","asc","desc","sort","a","b","localeCompare","rows","childNodes","addEventListener","onHeaderClick","window","onWindowScroll","destroy","removeEventListener","DoubleSlider","min","max","formatValue","value","selected","from","to","preventDefault","left","innerLeft","right","innerRight","width","inner","dragging","thumbLeft","newLeft","clientX","shiftX","parseFloat","thumbRight","style","progress","getValue","newRight","onThumbPointerMove","onThumbPointerUp","dispatchEvent","CustomEvent","detail","bubbles","ondragstart","onThumbPointerDown","result","elements","rangeTotal","Math","floor","thumbElem","round","Page","setTimeout","delete","initComponents","doubleSlider","sortableTable","components","getComponents","sliderContainer","productsContainer","onSliderRangeSelect","filterName","onFilterNameInput","filterStatus","onFilterStatusChange","Object","values","forEach","component","params","response","fetch","err","FetchError","ok","errorText","statusText","json","error","message","status","Error","super","reason","alert"],"mappings":"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","file":"products-list-index-js-197.js","sourcesContent":["import fetchJson from '../../utils/fetch-json.js';\r\n\r\nconst BACKEND_URL = process.env.BACKEND_URL;\r\n\r\nexport default class SortableTable {\r\n  element;\r\n  subElements = {};\r\n  data = [];\r\n  loading = false;\r\n  start = 1;\r\n  step = 20;\r\n  end = this.start + this.step;\r\n\r\n  constructor(headersConfig = [], {\r\n    url = '',\r\n    sorted = {\r\n      id: headersConfig.find((item) => item.sortable).id,\r\n      order: 'asc'\r\n    },\r\n    isSortLocally = false,\r\n    step = 20,\r\n    start = 1,\r\n    end = start + step,\r\n    range,\r\n    rowTemplate = (html, item) => `\r\n      <div class=\"sortable-table__row\">\r\n        ${html}\r\n      </div>`\r\n  } = {}) {\r\n    this.headersConfig = headersConfig;\r\n    this.url = url;\r\n    this.sorted = sorted;\r\n    this.isSortLocally = isSortLocally;\r\n    this.step = step;\r\n    this.start = start;\r\n    this.end = end;\r\n    this.range = range;\r\n    this.rowTemplate = rowTemplate;\r\n\r\n    this.render();\r\n  }\r\n\r\n  onWindowScroll = async() => {\r\n    const { bottom } = this.element.getBoundingClientRect();\r\n    const { id, order } = this.sorted;\r\n\r\n    if (bottom < document.documentElement.clientHeight && !this.loading && !this.isSortLocally) {\r\n      this.start = this.end;\r\n      this.end = this.start + this.step;\r\n\r\n      this.loading = true;\r\n\r\n      const data = await this.loadData(id, order, this.start, this.end);\r\n\r\n      this.update(data);\r\n\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  getTemplate() {\r\n    return `\r\n      <div class=\"sortable-table\">\r\n        ${this.getTableHeader()}\r\n        ${this.getTableBody(this.data)}\r\n\r\n        <div data-element=\"loading\" class=\"loading-line sortable-table__loading-line\"></div>\r\n\r\n        <div data-element=\"emptyPlaceholder\" class=\"sortable-table__empty-placeholder\">\r\n          <div>\r\n            <p>No products satisfies your filter criteria</p>\r\n          </div>\r\n        </div>\r\n      </div>  \r\n      `;\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const elements = element.querySelectorAll(`[data-element]`);\r\n\r\n    return [...elements].reduce((acc, subElement) => {\r\n      acc[subElement.dataset.element] = subElement;\r\n\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  getTableHeader() {\r\n    return `\r\n      <div data-element=\"header\" class=\"sortable-table__header sortable-table__row\">\r\n        ${this.headersConfig.map((header) => this.getHeaderRow(header)).join('')}\r\n      </div>`;  \r\n  }\r\n\r\n  getHeaderRow({ id, title, sortable }) {\r\n    const order = this.sorted.id === id ? this.sorted.order : 'asc';\r\n\r\n    return `\r\n      <div\r\n        class=\"sortable-table__cell\"\r\n        data-id=\"${id}\"\r\n        data-sortable=\"${sortable}\"\r\n        data-order=\"${order}\"\r\n      >\r\n        <span>${title}</span>\r\n        ${this.getHeaderSortingArrow(id)}\r\n      </div>`;\r\n  }\r\n\r\n  getHeaderSortingArrow(id) {\r\n    const isOrderExist = this.sorted.id === id ? this.sorted.order : '';\r\n\r\n    return isOrderExist\r\n      ? `<span data-element=\"arrow\" class=\"sortable-table__sort-arrow\">\r\n          <span class=\"sort-arrow\"></span>\r\n        </span>`\r\n      : '';\r\n  }\r\n\r\n  getTableBody(data) {\r\n    return `\r\n      <div data-element=\"body\" class=\"sortable-table__body\">\r\n        ${this.getTableRows(data)}\r\n      </div>`;\r\n  }\r\n\r\n  getTableRows(data) {\r\n    return data.map(item => this.rowTemplate(this.getTableRow(item), item)\r\n    ).join('');\r\n  }\r\n\r\n  getTableRow(item) {\r\n    const cells = this.headersConfig.map(({ id, template }) => {\r\n      return {\r\n        id,\r\n        template\r\n      };\r\n    });\r\n\r\n    return cells.map(({ id, template }) => {\r\n      return template\r\n        ? template(item[id])\r\n        : `<div class=\"sortable-table__cell\">${item[id]}</div>`; \r\n    })\r\n    .join(''); \r\n  }\r\n\r\n  async render() {\r\n    const {id, order} = this.sorted;\r\n    const wrapper = document.createElement('div');\r\n    \r\n    wrapper.innerHTML = this.getTemplate();\r\n\r\n    const element = wrapper.firstElementChild;\r\n\r\n    this.element = element;\r\n    this.subElements = this.getSubElements(element);\r\n\r\n    const data = await this.loadData(id, order, this.start, this.end);\r\n\r\n    this.renderRows(data);\r\n    this.initEventListeners();\r\n  }\r\n\r\n  async loadData(id, order, start = this.start, end = this.end) {\r\n    const url = new URL(this.url, BACKEND_URL);\r\n\r\n    url.searchParams.set('_sort', id);\r\n    url.searchParams.set('_order', order);\r\n    url.searchParams.set('_start', start);\r\n    url.searchParams.set('_end', end);\r\n\r\n    this.element.classList.add('sortable-table_loading');\r\n\r\n    const data = await fetchJson(url.toString());\r\n\r\n    this.element.classList.remove('sortable-table_loading');\r\n\r\n    return data;\r\n  }\r\n\r\n  sortOnClient(id, order) {\r\n    const sortedData = this.sortData(id, order);\r\n\r\n    this.subElements.body.innerHTML = this.getTableRows(sortedData);\r\n  }\r\n\r\n  async sortOnServer(id, order, start, end) {\r\n    const data = await this.loadData(id, order, start, end);\r\n\r\n    this.renderRows(data);\r\n  }\r\n\r\n  renderRows(data) {\r\n    if (data.length) {\r\n      this.element.classList.remove('sortable-table_empty');\r\n      this.addRows(data);\r\n    } else {\r\n      this.element.classList.add('sortable-table_empty');\r\n    }\r\n  }\r\n\r\n  addRows(data) {\r\n    this.data = data;\r\n\r\n    this.subElements.body.innerHTML = this.getTableRows(data);\r\n  }\r\n  \r\n  sortData(id, order) {\r\n    const arr = [...this.data];\r\n    const column = this.headersConfig.find((item) => item.id === id);\r\n\r\n    const { sortType } = column;\r\n    const directions = {\r\n      asc: 1,\r\n      desc: -1\r\n    };\r\n\r\n    const direction = directions[order];\r\n\r\n    return arr.sort((a, b) => {\r\n      switch (sortType) {\r\n      case \"number\":\r\n        return direction * (a[id] - b[id]);\r\n      case \"string\":\r\n        return direction * a[id].localeCompare(b[id], [\"ru\", \"en\"]);\r\n      default:\r\n        return direction * (a[id] - b[id]);\r\n      }\r\n    });\r\n  }\r\n\r\n  onHeaderClick = async (event) => {\r\n    const column = event.target.closest('[data-sortable=\"true\"]');\r\n\r\n    if (!column) {\r\n      return;\r\n    }\r\n\r\n    this.start = 0;\r\n    this.end = this.start + this.step;\r\n\r\n    const order = column.dataset.order === 'asc' ? 'desc' : 'asc';\r\n    column.dataset.order = order;\r\n\r\n    const arrow = column.querySelector('.sortable-table__sort-arrow');\r\n\r\n    if (!arrow) {\r\n      column.append(this.subElements.arrow);\r\n    }\r\n\r\n    if (this.isSortLocally) {\r\n      this.sortOnClient(column.dataset.id, order, this.start, this.end);\r\n    } else {\r\n      this.sortOnServer(column.dataset.id, order, this.start, this.end);\r\n    }\r\n  }\r\n\r\n  update(data) {\r\n    const rows = document.createElement('div');\r\n\r\n    this.data = [...this.data, ...data];\r\n    rows.innerHTML = this.renderRows(data);\r\n\r\n    this.subElements.body.append(...rows.childNodes);\r\n  }\r\n\r\n  initEventListeners() {\r\n    this.subElements.header.addEventListener('pointerdown', this.onHeaderClick);\r\n\r\n    window.addEventListener('scroll', this.onWindowScroll);\r\n  }\r\n    \r\n  remove() {\r\n    if (this.element) {\r\n      this.element.remove();\r\n    }\r\n  }\r\n    \r\n  destroy() {\r\n    this.remove();\r\n    this.element = null;\r\n    this.subElements = {};\r\n\r\n    window.removeEventListener('scroll', this.onWindowScroll);\r\n  }\r\n\r\n}\r\n","export default class DoubleSlider {\r\n  element;\r\n  subElements = {};\r\n\r\n  onThumbPointerMove = event => {\r\n    event.preventDefault();\r\n\r\n    const { left: innerLeft, right: innerRight, width } = this.subElements.inner.getBoundingClientRect();\r\n\r\n    if (this.dragging === this.subElements.thumbLeft) {\r\n      let newLeft = (event.clientX - innerLeft + this.shiftX) / width;\r\n\r\n      if (newLeft < 0) {\r\n        newLeft = 0;\r\n      }\r\n      newLeft *= 100;\r\n      const right = parseFloat(this.subElements.thumbRight.style.right);\r\n\r\n      if (newLeft + right > 100) {\r\n        newLeft = 100 - right;\r\n      }\r\n\r\n      this.dragging.style.left = this.subElements.progress.style.left = newLeft + '%';\r\n      this.subElements.from.innerHTML = this.formatValue(this.getValue().from);\r\n    }\r\n\r\n    if (this.dragging === this.subElements.thumbRight) {\r\n      let newRight = (innerRight - event.clientX - this.shiftX) / width;\r\n\r\n      if (newRight < 0) {\r\n        newRight = 0;\r\n      }\r\n      newRight *= 100;\r\n\r\n      const left = parseFloat(this.subElements.thumbLeft.style.left);\r\n\r\n      if (left + newRight > 100) {\r\n        newRight = 100 - left;\r\n      }\r\n      this.dragging.style.right = this.subElements.progress.style.right = newRight + '%';\r\n      this.subElements.to.innerHTML = this.formatValue(this.getValue().to);\r\n    }\r\n  };\r\n\r\n  onThumbPointerUp = () => {\r\n    this.element.classList.remove('range-slider_dragging');\r\n\r\n    document.removeEventListener('pointermove', this.onThumbPointerMove);\r\n    document.removeEventListener('pointerup', this.onThumbPointerUp);\r\n\r\n    this.element.dispatchEvent(new CustomEvent('range-select', {\r\n      detail: this.getValue(),\r\n      bubbles: true\r\n    }));\r\n  };\r\n\r\n  constructor({\r\n    min = 0,\r\n    max = 4000,\r\n    formatValue = value => '$' + value,\r\n    selected = {\r\n      from: min,\r\n      to: max\r\n    }\r\n  } = {}) {\r\n    this.min = min;\r\n    this.max = max;\r\n    this.formatValue = formatValue;\r\n    this.selected = selected;\r\n\r\n    this.render();\r\n  }\r\n\r\n  get template() {\r\n    const { from, to } = this.selected;\r\n\r\n    return `<div class=\"range-slider\">\r\n      <span data-element=\"from\">${this.formatValue(from)}</span>\r\n      <div data-element=\"inner\" class=\"range-slider__inner\">\r\n        <span data-element=\"progress\" class=\"range-slider__progress\"></span>\r\n        <span data-element=\"thumbLeft\" class=\"range-slider__thumb-left\"></span>\r\n        <span data-element=\"thumbRight\" class=\"range-slider__thumb-right\"></span>\r\n      </div>\r\n      <span data-element=\"to\">${this.formatValue(to)}</span>\r\n    </div>`;\r\n  }\r\n\r\n  render() {\r\n    const element = document.createElement('div');\r\n\r\n    element.innerHTML = this.template;\r\n\r\n    this.element = element.firstElementChild;\r\n    this.element.ondragstart = () => false;\r\n\r\n    this.subElements = this.getSubElements(element);\r\n\r\n    this.initEventListeners();\r\n\r\n    this.update();\r\n  }\r\n\r\n  initEventListeners() {\r\n    const { thumbLeft, thumbRight } = this.subElements;\r\n\r\n    thumbLeft.addEventListener('pointerdown', event => this.onThumbPointerDown(event));\r\n    thumbRight.addEventListener('pointerdown', event => this.onThumbPointerDown(event));\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const result = {};\r\n    const elements = element.querySelectorAll('[data-element]');\r\n\r\n    for (const subElement of elements) {\r\n      const name = subElement.dataset.element;\r\n\r\n      result[name] = subElement;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    document.removeEventListener('pointermove', this.onThumbPointerMove);\r\n    document.removeEventListener('pointerup', this.onThumbPointerUp);\r\n  }\r\n\r\n  update() {\r\n    const rangeTotal = this.max - this.min;\r\n    const left = Math.floor((this.selected.from - this.min) / rangeTotal * 100) + '%';\r\n    const right = Math.floor((this.max - this.selected.to) / rangeTotal * 100) + '%';\r\n\r\n    this.subElements.progress.style.left = left;\r\n    this.subElements.progress.style.right = right;\r\n\r\n    this.subElements.thumbLeft.style.left = left;\r\n    this.subElements.thumbRight.style.right = right;\r\n  }\r\n\r\n  onThumbPointerDown(event) {\r\n    const thumbElem = event.target;\r\n\r\n    event.preventDefault();\r\n\r\n    const { left, right } = thumbElem.getBoundingClientRect();\r\n\r\n    if (thumbElem === this.subElements.thumbLeft) {\r\n      this.shiftX = right - event.clientX;\r\n    } else {\r\n      this.shiftX = left - event.clientX;\r\n    }\r\n\r\n    this.dragging = thumbElem;\r\n\r\n    this.element.classList.add('range-slider_dragging');\r\n\r\n    document.addEventListener('pointermove', this.onThumbPointerMove);\r\n    document.addEventListener('pointerup', this.onThumbPointerUp);\r\n  }\r\n\r\n  getValue() {\r\n    const rangeTotal = this.max - this.min;\r\n    const { left } = this.subElements.thumbLeft.style;\r\n    const { right } = this.subElements.thumbRight.style;\r\n\r\n    const from = Math.round(this.min + parseFloat(left) * 0.01 * rangeTotal);\r\n    const to = Math.round(this.max - parseFloat(right) * 0.01 * rangeTotal);\r\n\r\n    return { from, to };\r\n  }\r\n}\r\n","const header = [\r\n  {\r\n    id: 'images',\r\n    title: 'Image',\r\n    sortable: false,\r\n    template: data => {\r\n      return `\r\n          <div class=\"sortable-table__cell\">\r\n            <img class=\"sortable-table-image\" alt=\"Image\" src=\"${data[0].url}\">\r\n          </div>\r\n        `;\r\n    }\r\n  },\r\n  {\r\n    id: 'title',\r\n    title: 'Name',\r\n    sortable: true,\r\n    sortType: 'string'\r\n  },\r\n  {\r\n    id: 'quantity',\r\n    title: 'Quantity',\r\n    sortable: true,\r\n    sortType: 'number'\r\n  },\r\n  {\r\n    id: 'price',\r\n    title: 'Price',\r\n    sortable: true,\r\n    sortType: 'number'\r\n  },\r\n  {\r\n    id: 'status',\r\n    title: 'Status',\r\n    sortable: true,\r\n    sortType: 'number',\r\n    template: data => {\r\n      return `<div class=\"sortable-table__cell\">\r\n          ${data > 0 ? 'Active' : 'Inactive'}\r\n        </div>`;\r\n    }\r\n  },\r\n];\r\n\r\nexport default header;\r\n","import SortableTable from \"../../../components/sortable-table/index.js\";\r\nimport DoubleSlider from \"../../../components/double-slider/index.js\";\r\nimport header from './headerConfig.js';\r\n\r\nimport fetchJson from \"../../../utils/fetch-json.js\";\r\n\r\nexport default class Page {\r\n  element;\r\n  subElements = {};\r\n  components = {};\r\n  range = {\r\n    min: 0,\r\n    max: 4000\r\n  };\r\n  url = new URL('api/rest/products', process.env.BACKEND_URL);\r\n\r\n  getTemplate() {\r\n    return `\r\n      <div class=\"products-list\">\r\n        <div class=\"content__top-panel\">\r\n          <h1 class=\"page-title\">Products</h1>\r\n          <a href=\"/products/add\" class=\"button-primary\">Add product</a>\r\n        </div>\r\n        <div class=\"content-box content-box_small\">\r\n          <form class=\"form-inline\">\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">Sort by:</label>\r\n              <input type=\"text\" data-element=\"filterName\" class=\"form-control\" placeholder=\"Product name\">\r\n            </div>\r\n            <div class=\"form-group\" data-element=\"sliderContainer\">\r\n              <label class=\"form-label\">Price:</label>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">Status:</label>\r\n              <select class=\"form-control\" data-element=\"filterStatus\">\r\n                <option value=\"\" selected=\"\">Any</option>\r\n                <option value=\"1\">Active</option>\r\n                <option value=\"0\">Inactive</option>\r\n              </select>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        <div data-element=\"productsContainer\" class=\"products-list__container\"></div>\r\n      </div>`;\r\n  }\r\n\r\n  getSubElements() {\r\n    const elements = this.element.querySelectorAll(`[data-element]`);\r\n\r\n    return [...elements].reduce((acc, subElement) => {\r\n      acc[subElement.dataset.element] = subElement;\r\n\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  initComponents() {\r\n    const doubleSlider = new DoubleSlider({\r\n      min: this.range.min,\r\n      max: this.range.max\r\n    });\r\n\r\n    const sortableTable = new SortableTable(header, {\r\n      url: 'api/rest/products?_embed=subcategory.category',\r\n      range: this.range,\r\n      rowTemplate: (html, item) => `<a href=\"/products/${item.id}\" class=\"sortable-table__row\">${html}</a>`\r\n    });\r\n\r\n    this.components = {\r\n      doubleSlider,\r\n      sortableTable\r\n    }\r\n  }\r\n\r\n  getComponents() {\r\n    const { sliderContainer, productsContainer } = this.subElements;\r\n\r\n    sliderContainer.append(this.components.doubleSlider.element);\r\n    productsContainer.append(this.components.sortableTable.element);\r\n  }\r\n\r\n  async render() {\r\n    const wrapper = document.createElement('div');\r\n\r\n    wrapper.innerHTML = this.getTemplate();\r\n\r\n    this.element = wrapper.firstElementChild;\r\n\r\n    this.subElements = this.getSubElements();\r\n\r\n    this.initComponents();\r\n    this.getComponents();\r\n    this.initEventListeners();\r\n\r\n    return this.element;\r\n  }\r\n\r\n  onSliderRangeSelect = (event) => {\r\n    const { from, to } = event.detail\r\n\r\n    this.url.searchParams.set('price_gte', from);\r\n    this.url.searchParams.set('price_lte', to);\r\n\r\n    this.update();\r\n  }\r\n\r\n  onFilterNameInput = (event) => {\r\n   setTimeout(() => {\r\n      if (!event.target.value.length) {\r\n        this.url.searchParams.delete('title_like');\r\n        this.update();\r\n        return;\r\n      }\r\n      this.url.searchParams.set('title_like', event.target.value);\r\n      this.update();\r\n    }, 500);\r\n  }\r\n\r\n  onFilterStatusChange = (event) => {\r\n    if (event.target.value !== '') {\r\n      this.url.searchParams.set('status', event.target.value);\r\n      this.update();\r\n      return;\r\n    }\r\n    this.url.searchParams.delete('status');\r\n    this.update();\r\n  }\r\n\r\n  async update() {\r\n    const data = await fetchJson(this.url);\r\n\r\n    this.components.sortableTable.update(data);\r\n  }\r\n\r\n  initEventListeners() {\r\n    this.components.doubleSlider.element.addEventListener('range-select', this.onSliderRangeSelect);\r\n    this.subElements.filterName.addEventListener('input', this.onFilterNameInput);\r\n    this.subElements.filterStatus.addEventListener('change', this.onFilterStatusChange);\r\n  }\r\n\r\n  remove() {\r\n    if (this.element) {\r\n      this.element.remove;\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    this.element = null;\r\n    this.subElements = {};\r\n    this.components = {};\r\n    Object.values(this.components).forEach((component) => {\r\n      component.destroy();\r\n    });\r\n  }\r\n\r\n}\r\n","// same as fetch, but throws FetchError in case of errors\r\n// status >= 400 is an error\r\n// network error / json error are errors\r\n\r\nexport default async function(url, params) {\r\n  let response;\r\n\r\n  try {\r\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\r\n    response = await fetch(url.toString(), params);\r\n  } catch(err) {\r\n    throw new FetchError(response, \"Network error has occurred.\");\r\n  }\r\n\r\n  let body;\r\n\r\n  if (!response.ok) {\r\n    let errorText = response.statusText; // Not Found (for 404)\r\n\r\n    try {\r\n      body = await response.json();\r\n\r\n      errorText = (body.error && body.error.message) || (body.data && body.data.error && body.data.error.message) || errorText;\r\n    } catch (error) { /* ignore failed body */ }\r\n\r\n    let message = `Error ${response.status}: ${errorText}`;\r\n\r\n    throw new FetchError(response, body, message);\r\n  }\r\n\r\n  try {\r\n    return await response.json();\r\n  } catch(err) {\r\n    throw new FetchError(response, null, err.message);\r\n  }\r\n}\r\n\r\nexport class FetchError extends Error {\r\n  name = \"FetchError\";\r\n\r\n  constructor(response, body, message) {\r\n    super(message);\r\n    this.response = response;\r\n    this.body = body;\r\n  }\r\n}\r\n\r\n// handle uncaught failed fetch through\r\nwindow.addEventListener('unhandledrejection', event => {\r\n  if (event.reason instanceof FetchError) {\r\n    alert(event.reason.message);\r\n  }\r\n});\r\n\r\n"],"sourceRoot":""}